<!doctype html>
<html lang="zh-cn">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <link rel="stylesheet" href="https://a.alipayobjects.com/g/antui/antui/10.0.18/dpl/antui.css"/>
    <title></title>
    <style>
    body{
      padding: 10px;
    }
  </style>
</head>

<body>
<button type="button" class="am-button" id="J_Save" onclick="go()">getDeviceSoftToken</button>
<button type="button" class="am-button" id="J_Save" onclick="callRpc()">CallRpc</button>
<button type="button" class="am-button" id="J_Save" onclick="callCreditRpc()">CallRpc</button>
<button type="button" class="am-button" id="J_Save" onclick="jsCallLuaSkip()">skipLua</button>
<button type="button" class="am-button" id="J_Save" onclick="jsCallLuaGet()">getLua</button>
<button type="button" class="am-button" id="J_Save" onclick="jsCallLuaCloud()">cloud_pay</button>
<button type="button" class="am-button" id="J_Save" onclick="jsCallLuaContact()">jsCallLuaContact</button>
<button type="button" class="am-button" id="J_Save" onclick="jsCallH5()">jsCallH5</button>
<button type="button" class="am-button" id="J_Save" onclick="jsGetInfo()">getInfo</button>
<button type="button" class="am-button" id="J_Save" onclick="jsTouch()">jsTouch</button>
<button type="button" class="am-button" id="J_Save" onclick="shareOnClick()">shareOnClick</button>
<button type="button" class="am-button" id="J_Save" onclick="enableScreenShot()">enableScreenShot</button>
<button type="button" class="am-button" id="J_Save" onclick="disableScreenShot()">disableScreenShot</button>
<button type="button" class="am-button" id="J_Save" onclick="callScan()">scanTest</button>
<button type="button" class="am-button" id="J_Save" onclick="getContact()">getContact</button>
<button type="button" class="am-button" id="J_Save" onclick="getContactAli()">getContactAlipay</button>
<button type="button" class="am-button" id="J_Save" onclick="permission()">permission</button>
<button type="button" class="am-button" id="J_Save" onclick="requestPermission()">requestPermission</button>
<button type="button" class="am-button" id="J_Save" onclick="abcFaceLiveDetect()">abcFaceLiveDetect</button>
<button type="button" class="am-button" id="J_Save" onclick="abcCqmf()">abcCqmf</button>
<button type="button" class="am-button" id="J_Save" onclick="jinRongFace()">jinRongFace</button>
<button type="button" class="am-button" id="J_Save" onclick="getOperatorType()">getOperatorType</button>
<button type="button" class="am-button" id="J_Save" onclick="startScanDevices()">startScanDevices</button>
<button type="button" class="am-button" id="J_Save" onclick="stopScanDevices()">stopScanDevices</button>
<button type="button" class="am-button" id="J_Save" onclick="connectDevice()">connectDevice</button>
<button type="button" class="am-button" id="J_Save" onclick="disconnectDevice()">disconnectDevice</button>
<button type="button" class="am-button" id="J_Save" onclick="registOnDeviceChangeListener()">registOnDeviceChangeListener</button>
<button type="button" class="am-button" id="J_Save" onclick="unregistOnDeviceChangeListener()">unregistOnDeviceChangeListener</button>
<button type="button" class="am-button" id="J_Save" onclick="getHardwareWalletInfo()">getHardwareWalletInfo</button>
<button type="button" class="am-button" id="J_Save" onclick="hardwareWalletCreateFin()">hardwareWalletCreateFin</button>
<button type="button" class="am-button" id="J_Save" onclick="hardwareWalletTradeResultQuery()">hardwareWalletTradeResultQuery</button>
<button type="button" class="am-button" id="J_Save" onclick="hardwareWalletNameChangeInit()">hardwareWalletNameChangeInit</button>
<button type="button" class="am-button" id="J_Save" onclick="hardwareWalletNameChange()">hardwareWalletNameChange</button>
<button type="button" class="am-button" id="J_Save" onclick="shouldLoadURL()">shouldLoadURL</button>
<button type="button" class="am-button" id="J_Save" onclick="checkNFC()">checkNFC</button>
<button type="button" class="am-button" id="J_Save" onclick="receiveNFC()">receiveNFC</button>
<button type="button" class="am-button" id="J_Save" onclick="sendNFC()">sendNFC</button>
<button type="button" class="am-button" id="J_Save" onclick="clearPageStack()">clearPageStack</button>
<button type="button" class="am-button" id="J_Save" onclick="getLocationInfo()">getLocationInfo</button>
<button type="button" class="am-button" id="J_Save" onclick="callWebBrowser()">callWebBrowser</button>


<!--<script src="https://imagesh1.abchina.com/MB/ADA22C0261615_default/abc_external_04.js"></script>-->
<script src="https://mgw.test.abchina.com:443/13035BB131050_default/bankabc_external.js"></script>
<script>

function clearPageStack(){
interBankBridge.clearPageStack();
}

function getLocationInfo(){
interBankBridge.getLocationInfo(function(r){
window.alert(JSON.stringify(r));
},function (result){
window.alert(result.message);
});
}

function callWebBrowser(){
interBankBridge.callWebBrowser(function(r){
window.alert(r);
}, null, {url: 'https://www.baidu.com'});
}

document.addEventListener('abcNFCOnDataReceive',
function(e) {
 window.alert("Hello world NFC:"+JSON.stringify(e));
},
false);


function checkNFC(){
AlipayJSBridge.call('abcNFCAvailability',function(result){
 window.alert("Hello world NFC:"+JSON.stringify(result));
});
}

function receiveNFC(){
AlipayJSBridge.call('abcNFCSetReceiveModel');
}

function sendNFC(){
AlipayJSBridge.call('abcNFCSetSendModel');
}

function shouldLoadURL(){
var url='https://www.abchina.com/abcpay|16151342218498530484&P034503080023417575295798&new*https://promo.ejiaofei.cn/customized/abc/huiZhou/index/345/oL3rDbg3?orderNo=P034503080023417575295798';
window.location.href=url;
}
function hardwareWalletTradeResultQuery(){
    AlipayJSBridge.call('abcDCHardwareWalletTradeResultQuery', function (result) {
            console.log(JSON.stringify(result));
    });
}

function hardwareWalletNameChangeInit(){
     AlipayJSBridge.call('abcDCHardwareWalletNameChangeInit',
                      {walletName:"dcq"},
                       function (result) {
                          console.log(JSON.stringify(result));
                          }
);
}
function hardwareWalletNameChange(){
  var param = new Object();
 param.apduCmdList = ["test1","test2","test3"];
 AlipayJSBridge.call('abcDCHardwareWalletNameChange',param,
                      function (result) {
                      console.log(JSON.stringify(result));
    });
}




function hardwareWalletCreateFin(){
var param = new Object();
 param.apduCmdList = ["test1","test2","test3"];
    AlipayJSBridge.call('hardwareWalletCreateFin',param, function (result) {
            console.log(JSON.stringify(result));
    });
}

function registOnDeviceChangeListener(){
    AlipayJSBridge.call('registOnDeviceChangeListener', function (result) {
            console.log(JSON.stringify(result));
    });
}
function getHardwareWalletInfo(){
    AlipayJSBridge.call('abcDCGetHardwareWalletInfo', function (result) {
            console.log(JSON.stringify(result));
    });
}

function unregistOnDeviceChangeListener(){
    AlipayJSBridge.call('unregistOnDeviceChangeListener', function (result) {
            console.log(JSON.stringify(result));
    });
}

function test(result) {
 console.log("dcq:"+JSON.stringify(result));
}
function onDeviceStateChange(result) {
 console.log("dcq"+JSON.stringify(result));
}
function startScanDevices(){
   document.addEventListener('abcDCOnScannedDevice',
      test,
      null);
    AlipayJSBridge.call('abcDCStartScanDevices');
}


function stopScanDevices(){
    AlipayJSBridge.call('stopScanDevices');

}

function connectDevice(){
document.addEventListener('abcDCOnDeviceStateChange',
      onDeviceStateChange,
      null);

AlipayJSBridge.call('abcDCConnectDevice', {
  macAddress:'38:95:92:00:2F:8C'
}, function (result) {
   window.alert(result.result);
});
}
function disconnectDevice(){
AlipayJSBridge.call('abcDCDisconnectDevice');
}

function getOperatorType(){
AlipayJSBridge.call('abcGetInfo', {
  name:'operatorType'
}, function (result) {
   window.alert(result.operatorType);
});
}

function jinRongFace(){
    AlipayJSBridge.call('abcGetInfo',{
        name: 'appversion'
    },function(result){
        let appversion = result.appversion.replace(/\./g,'');
        if(appversion >= '550'){
         window.alert("Hello world appversion:"+appversion);
            //使用新的JSAPI
             let redisKey= "198eb2b56840d5439c51318257d04188";
             let callback = function(result, retMsg) {
                console.log(result);
                  console.log(retMsg);
             }
              callFaceAuth(redisKey,callback);
        } else {
            // 使用旧方法
            window.alert("Hello world,old function")
        }
    });
}

function abcCqmf(){
AlipayJSBridge.call("abcCqmf",
                    {"uuid": "15994799359"},
                    function(result) {
                      var code = result.code;
                    }
);
}

function abcFaceLiveDetect(){
var param = new Object();
param.name="小明";
param.notice="bottom tips";
AlipayJSBridge.call("abcCWFaceLiveDetect",
                     param,
                    function(result) {
                      var code = result.bestFaceBase64;
                      var msg = result.antiHackString;
                      alert(code+msg)
                    }
);
}

function permission(){
   var param = new Object();
    param.method = "hasPhonePermission";
   AlipayJSBridge.call("abcPermission",param,function(result) {
   alert(result.result)
});
}
function requestPermission(){
   AlipayJSBridge.call("abcPermission",{
        method:"requestPhonePermission"
   },function(result) {
   alert(result.result)
});
}

function getContactAli(){
   AlipayJSBridge.call("contact", function(result) {
   alert(JSON.stringify(result))
});
}


function getContact(){
    var param = new Object();
    param.method = "open";
    AlipayJSBridge.call("abcContact", param, function(result) {
    alert(result);
    alert(JSON.stringify(result))
    });
}

function enableScreenShot(){
    var param = new Object();
    param.method = "enableScreenshots";
AlipayJSBridge.call("abcTool", param, function(result) {
alert(result);
alert(JSON.stringify(result))
});
}

function callScan(){
    var param = new Object();
    param.method = "open";
AlipayJSBridge.call("abcQRCode", param, function(result) {
alert(result);
alert(JSON.stringify(result))
});
}

function disableScreenShot(){
    var param = new Object();
    param.method = "disableScreenshots";
AlipayJSBridge.call("abcTool", param, function(result) {
alert(result);
alert(JSON.stringify(result))
});
}


function go(){
    var param = new Object();
    param.method = "getDeviceToken";
AlipayJSBridge.call("softtoken", param, function(result) {
alert(result);
alert(JSON.stringify(result))
});
}

function callRpc(){
       var params = [{
        "_requestBody":{
          "data":{
            "ccyCode":122,
          }
        }
      }];
        let operationType = 'com.bankabc.credit.finance.getCreditBill';

      AlipayJSBridge.call('abcrpc', {
        operationType: operationType,
        requestData: params,
        headers:{},
        timeout:3000
      }, function (response) {
         alert(JSON.stringify(response));

      });
}


function callCreditRpc(){
       var params = [{
        "_requestBody":{
          "data":{
            "ccyCode":122,
          }
        }
      }];
        let operationType = 'com.bankabc.credit.finance.getCreditBill';

      AlipayJSBridge.call('abcrpc', {
        operationType: operationType,
        requestData: params,
        headers:{}
      }, function (response) {
         alert(JSON.stringify(response));

      });
}

function jsCallLuaSkip(){
        AlipayJSBridge.call('abcLuaOpen', {
                  method:"moreReco()",
                  params:""
                }, function (result) {
                  console.log(result);
                  alert(JSON.stringify(result));
                });

}

function jsCallLuaGet(){
        AlipayJSBridge.call('abcLuaGetData', {
                  method:"jsDoLua()",
                  params:""
                }, function (result) {
                  console.log(result);
                  alert(JSON.stringify(result));
                });

}

function jsCallLuaCloud(){
        AlipayJSBridge.call('abcLuaOpen', {
                  method:"cloudPay",
                  params:"6228360053957958"
                }, function (result) {
                  console.log(result);
                  alert(JSON.stringify(result));
                });

}


function jsCallLuaContact(){
        AlipayJSBridge.call('abcLuaOpen', {
                  method:"contactService_SecondStage",
                  params:"6228360053957958"
                }, function (result) {
                  console.log(result);
                  alert(JSON.stringify(result));
                });

}

function jsCallH5(){
        AlipayJSBridge.call('openUrl', {
                  url:"http://www.baidu.com",
                }, function (result) {
                  console.log(result);
                  alert(JSON.stringify(result));
                });

}
function jsGetInfo(){
        AlipayJSBridge.call('abcGetInfo', {
                  name:"deviceID",
                }, function (result) {
                  console.log(result);
                  alert(JSON.stringify(result));
                });

}

function jsTouch(){
        AlipayJSBridge.call('abcTouchAuth', {
                  title:"11111",
                  fallButtonTitle:"22222"
                }, function (result) {
                  console.log(result);
                  alert(JSON.stringify(result));
                });

}

function jsShare(){
        AlipayJSBridge.call('abcShare', {
                  title:"11111",
                  fallButtonTitle:"22222"
                }, function (result) {
                  console.log(result);
                  alert(JSON.stringify(result));
                });

}

function shareOnClick(){
      var platformsObj = {
        method:"setPlatforms",
        platforms:
        [{title:"微信好友",image:"share_wechat.png",scence:0,type:"native",method:""},
        {title:"朋友圈",image:"share_wechat_timeline.png",scence:1,type:"native",method:""},
        {title:"收藏",image:"share_wechat_favorite.png",scence:2,type:"native",method:""}]
      };
      AlipayJSBridge.call("abcShare",platformsObj);
      var paramsObj = {
          method:"setShareLink",
          'title':'分享测试',
          'description':'分享测试',
          'linkUrl':'www.baidu.com',
          'thumbUrl':''
            };
      AlipayJSBridge.call("abcShare",paramsObj);
      AlipayJSBridge.call("abcShare",{method:"openShare"});
    }


    </script>

</body>

</html>


