
<!doctype html>
<html lang="zh-cn">

<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />
<meta name="format-detection" content="telephone=no" />
<title>自定义 JSAPI</title>
</head>

<body>
<button id="J_Custom_Jsapi1">brightness</button> <br />
<button id="J_Custom_Jsapi2">recoverbrightness</button> <br />
<button id="J_Custom_Jsapi3">location</button> <br />
<button id="J_Custom_Jsapi4">sms</button> <br />
<button id="J_Custom_Jsapi5">browser</button> <br />
<button id="J_Custom_Jsapi6">exitapp</button> <br />
</body>

<script>
    function ready(callback) {
    // 如果 jsbridge 已经注入则直接调用
        if (window.AlipayJSBridge) {
            callback && callback();
        } else {
            // 如果没有注入则监听注入的事件
            document.addEventListener('AlipayJSBridgeReady', callback, false);
        }
    }
    

    ready(function () {
        var jsapiNode = document.getElementById('J_Custom_Jsapi1');
        jsapiNode.addEventListener('click', function () {
            AlipayJSBridge.call('canOpen', {
                url: 'sdada'
            }, function (result) {
                alert(JSON.stringify(result));
            });
        });
        var jsapiNode2 = document.getElementById('J_Custom_Jsapi2');
        jsapiNode2.addEventListener('click', function () {
            AlipayJSBridge.call('screen', {
                method: 'recoverScreenBrightness',
                value: 222
            }, function (result) {
                alert(JSON.stringify(result));
            });
        });
        var jsapiNode3 = document.getElementById('J_Custom_Jsapi3');
        jsapiNode3.addEventListener('click', function () {
            AlipayJSBridge.call('location', {
                source:'0'
            },function(result) {
                console.log(result.longitude);
                console.log(result.latitude);
                console.log(result.cityCode);
                console.log(result.province);
                console.log(result.city);
            });
        });
        var jsapiNode4 = document.getElementById('J_Custom_Jsapi4');
        jsapiNode4.addEventListener('click', function () {
            AlipayJSBridge.call('sms', {
                phoneNumber:"10086",
                content:"YE"
            }, function (result) {
                alert(JSON.stringify(result));
            });
        });

        var jsapiNode5 = document.getElementById('J_Custom_Jsapi5');
        jsapiNode5.addEventListener('click', function () {
            AlipayJSBridge.call('browser', {
                url:"https://www.baidu.com",
            });
        });
        var jsapiNode6 = document.getElementById('J_Custom_Jsapi6');
        jsapiNode6.addEventListener('click', function () {
            AlipayJSBridge.call('exitApp', {
            });
        });

    });
</script>

</html>
